# web压力测试

物理机：2核4线程2.8GHZ，12G。

jvm启动参数: -Xmx2048m -Xms300m 。通过jconsole attach到进程后看启动信息，或者用jinfo打印相关信息`jinfo -flag MaxHeapSize pid` `jinfo -flag InitialHeapSize pid`。

##### 1.1w请求，1k并发

`ab -n 10000 -c 1000  http://localhost:8080/post\?state\=ACTIVE,ARCHIVED`

Server Software:        
Server Hostname:        localhost
Server Port:            8080

Document Path:          /post?state=ACTIVE,ARCHIVED
Document Length:        559 bytes

Concurrency Level:      1000
Time taken for tests:   5.935 seconds
Complete requests:      10000
Failed requests:        0
Total transferred:      6640000 bytes
HTML transferred:       5590000 bytes
Requests per second:    1684.93 [#/sec] (mean)
Time per request:       593.495 [ms] (mean)
Time per request:       0.593 [ms] (mean, across all concurrent requests)
Transfer rate:          1092.57 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0    7  44.8      1    1029
Processing:    16  565 111.6    613     710
Waiting:       15  562 111.3    611     704
Total:         47  572 117.0    618    1662

Percentage of the requests served within a certain time (ms)
  50%    618
  66%    635
  75%    644
  80%    650
  90%    661
  **95%    669
**  98%    679
  99%    685
 100%   1662 (longest request)

##### 2.1w请求，4k并发
`ab -n 10000 -c 4000  http://localhost:8080/post\?state\=ACTIVE,ARCHIVED`  
Server Software:        
Server Hostname:        localhost
Server Port:            8080

Document Path:          /post?state=ACTIVE,ARCHIVED
Document Length:        559 bytes

Concurrency Level:      4000
Time taken for tests:   6.771 seconds
Complete requests:      10000
Failed requests:        0
Total transferred:      6640000 bytes
HTML transferred:       5590000 bytes
Requests per second:    1476.91 [#/sec] (mean)
Time per request:       2708.365 [ms] (mean)
Time per request:       0.677 [ms] (mean, across all concurrent requests)
Transfer rate:          957.68 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0   72 180.3      8    1032
Processing:    78 2177 619.3   2406    3033
Waiting:       78 2176 619.3   2404    3032
Total:        215 2250 641.6   2416    4047

Percentage of the requests served within a certain time (ms)
  50%   2416
  66%   2464
  75%   2518
  80%   2580
  90%   2748
  **95%   2937
**  98%   3639
  99%   3842
 100%   4047 (longest request)

# mysql基准测试